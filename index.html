<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dapur Ghania</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-[#FDFBF7] text-gray-800">

<!-- HEADER -->
<header class="bg-[#7A1F1F] text-white p-4 text-center">
  <h1 class="text-xl font-bold">Dapur Ghania</h1>
  <p class="text-sm">Catering & Snack Box</p>
</header>

<!-- HERO -->
<section class="p-4 text-center">
  <h2 class="text-lg font-semibold mb-2">
    Cek Invoice Pesanan Anda
  </h2>
  <p class="text-sm text-gray-600">
    Masukkan nomor WhatsApp yang digunakan saat pemesanan
  </p>
</section>

<!-- FORM CEK INVOICE -->
<section class="p-4">
  <input
    id="wa"
    type="number"
    placeholder="Contoh: 08123456789"
    class="w-full border rounded p-3 mb-3 focus:outline-none focus:ring-2 focus:ring-[#7A1F1F]"
  >

  <button
    onclick="cekInvoice()"
    class="w-full bg-[#7A1F1F] text-white py-3 rounded font-semibold">
    Cek Invoice Belum Dibayar
  </button>
</section>

<!-- HASIL -->
<section id="hasil" class="p-4"></section>

<!-- FOOTER -->
<footer class="text-center text-xs text-gray-500 py-6">
  Â© 2026 Dapur Ghania
</footer>

<script>
/* ===============================
   KONFIGURASI API
================================ */
const API_URL = "https://script.google.com/macros/s/AKfycbzLaFtDByFNLGatvIXb8siiAEOQNVEVJ0tIgMOjFy80iRkbDgfikZNbc_KXQfiIe_IYVw/exec"; // GANTI
const API_KEY = "DAPUR_GHANIA_2026";

/* ===============================
   FUNGSI CEK INVOICE
================================ */
function cekInvoice() {
  const wa = document.getElementById("wa").value;
  const hasil = document.getElementById("hasil");

  if (!wa) {
    alert("Masukkan nomor WhatsApp");
    return;
  }

  hasil.innerHTML = "<p class='text-center text-gray-500'>Memuat data...</p>";

  fetch(`${API_URL}?key=${API_KEY}&wa=${wa}`)
    .then(res => res.json())
    .then(data => {
      hasil.innerHTML = "";

      if (data.length === 0) {
        hasil.innerHTML = `
          <div class="text-center text-gray-500">
            Tidak ada invoice yang belum dibayar
          </div>`;
        return;
      }

      data.forEach(inv => {
        hasil.innerHTML += `
          <div class="border rounded-lg p-4 mb-3 bg-yellow-50">
            <div class="font-bold">${inv.invoice_id}</div>
            <div>Total: <b>Rp ${Number(inv.total).toLocaleString()}</b></div>
            <div>Tanggal: ${inv.tanggal}</div>
            <div class="text-red-600 font-semibold">Belum Dibayar</div>

            <a
              href="https://wa.me/62XXXXXXXXXX?text=Halo%20Dapur%20Ghania%2C%20saya%20ingin%20membayar%20invoice%20${inv.invoice_id}"
              class="block mt-3 text-center bg-green-600 text-white py-2 rounded">
              Bayar via WhatsApp
            </a>
          </div>
        `;
      });
    })
    .catch(() => {
      hasil.innerHTML = "<p class='text-red-500'>Gagal memuat data</p>";
    });
}
</script>

</body>
</html>
