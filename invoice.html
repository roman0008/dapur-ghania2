<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Invoice Belum Dibayar</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="p-4 bg-gray-50">

<h1 class="text-xl font-bold mb-4">Invoice Belum Dibayar</h1>

<input id="wa" placeholder="Masukkan No WhatsApp"
 class="border p-2 w-full mb-3">

<button onclick="loadInvoice()"
 class="bg-[#7A1F1F] text-white px-4 py-2 rounded w-full">
Cek Invoice
</button>

<div id="list" class="mt-4"></div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbxWPZevRCMXGNblie0qYjjLr1v8cg0YIqUVcgRR58n5HUWmSySDJoMr4hMfldeQOmHGgg/exec";
const KEY = "DAPUR_GHANIA_2026";

function loadInvoice() {
  const wa = document.getElementById("wa").value;
  fetch(`${API_URL}?key=${KEY}&wa=${wa}`)
    .then(res => res.json())
    .then(data => {
      const list = document.getElementById("list");
      list.innerHTML = "";

      if (data.length === 0) {
        list.innerHTML = "<p class='text-gray-500'>Tidak ada invoice belum dibayar</p>";
        return;
      }

      data.forEach(inv => {
        list.innerHTML += `
          <div class="bg-yellow-50 border p-3 rounded mb-2">
            <b>${inv.invoice_id}</b><br>
            Total: Rp ${Number(inv.total).toLocaleString()}<br>
            Tanggal: ${inv.tanggal}<br>
            <a href="https://wa.me/62xxxxxxxxxx?text=Halo%20saya%20ingin%20bayar%20${inv.invoice_id}"
              class="text-blue-600 underline">
              Bayar via WhatsApp
            </a>
          </div>
        `;
      });
    });
}
</script>

</body>
</html>
